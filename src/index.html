<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Team Blue — Run & Test Guide</title>
    <style>
        body { 
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; 
            line-height: 1.6; 
            margin: 0;
            color: #111;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #0b4a6f;
        }
        .logo {
            height: 300px;
            width: auto;
        }
        h1,h2 { 
            color: #0b4a6f;
            margin-top: 30px;
        }
        pre { 
            background: #f6f8fa; 
            padding: 16px; 
            border-radius: 8px; 
            overflow: auto;
            border: 1px solid #e1e4e8;
        }
        code { 
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace; 
        }
        .note { 
            background: #fff8e1; 
            padding: 16px; 
            border-left: 4px solid #ffd54f; 
            margin: 16px 0;
            border-radius: 0 8px 8px 0;
        }
        .kbd { 
            background: #eee; 
            padding: 2px 6px; 
            border-radius: 4px; 
            font-size: 0.95em; 
        }
        footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header"></header>
            <img src="../Documentation/Logos/SwaB_Logo(Cams version).png" alt="SwaB Logo" class="logo">
            <h1>Team Blue — Run & Test API</h1>
        </header>

    <p>Get resources / resource types:</p>
    <pre><code>curl -X GET "http://127.0.0.1:8000/resources"
curl -X GET "http://127.0.0.1:8000/resourcetypes"
</code></pre>

    <p>POST example (listener / resources). Add Authorization header if required by your deployment:</p>
    <pre><code>curl -X POST "http://127.0.0.1:8000/listener" \
    -H "Authorization: Bearer &lt;insert_token_here&gt;" \
    -H "Content-Type: application/json" \
    -d '{"type_id":"2","location_id":"1","employee_id":31,"notes":"This is a test","is_decommissoned":"0"}'
</code></pre>

    <p>POST resource example (JSON body expected):</p>
    <pre><code>curl -X POST "http://127.0.0.1:8000/resources" \
    -H "Content-Type: application/json" \
    -d '{"name":"example","type_id":2,"location_id":1,"employee_id":31}'
</code></pre>

    <h2>7) Ping the database directly</h2>
    <p>If you have MySQL client access (example from repository notes):</p>
    <pre><code>mysql -u teamblue -p -h 172.16.0.122
# enter password when prompted
</code></pre>
    <p>Or use the readiness endpoint which attempts a SELECT 1 against the DB and returns latency:</p>
    <pre><code>curl -X GET "http://127.0.0.1:8000/health/ready"
</code></pre>

    <h2>8) Run tests / local scripts</h2>
    <pre><code># run bundled test script (if present)
./test.sh

# or run a specific test module
python -m src.DatabaseController.test
</code></pre>

    <h2>9) Troubleshooting</h2>
    <ul>
        <li>If /health/ready returns status down, check DB credentials, network (DB IP type), and that the Cloud SQL instance accepts connections.</li>
        <li>Check logs printed by uvicorn for connector errors; ensure DB environment variables are exported in the shell running uvicorn.</li>
        <li>When using the Google Cloud SQL Connector, ensure the connector library and auth (service account) are configured if connecting to a GCP instance.</li>
    </ul>

    <div class="note">
        Note: replace placeholders (DB credentials, instance name, tokens) with your real values. For production deployments, don't store secrets in plaintext environment variables — use a secrets manager.
    </div>

    <div class="note">
        <a href="../src/index_test.html">Test our project!</a>
    </div>

    <footer>
        <p style="font-size:0.9em;color:#666">This page is a minimal quick-start. See README.md in the repo root for more details.</p>
    </footer>
</body>
</html>